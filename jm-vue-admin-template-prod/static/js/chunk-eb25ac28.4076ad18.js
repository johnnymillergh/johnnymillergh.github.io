(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eb25ac28"],{"05df":function(e,t,i){"use strict";var n=i("a16a"),s=i.n(n);s.a},2246:function(e,t,i){"use strict";var n=i("8d9c"),s=i.n(n);s.a},"23d2":function(e,t,i){"use strict";var n=i("b775"),s={getController:function(){return Object(n["a"])("/api-management/get-controller")},getApiByControllerClass:function(e){return Object(n["a"])("/api-management/get-api-by-controller-class",e)},getApiAnalysis:function(e){return Object(n["a"])("/api-management/get-api-analysis",e)},setApiInUse:function(e){return Object(n["c"])("/api-management/set-api-in-use",e)},setAllApiInUse:function(e){return Object(n["b"])("/api-management/set-all-api-in-use",e)},getApiList:function(e){return Object(n["c"])("/api-management/get-api-list",e)},getRoleList:function(e){return Object(n["c"])("/role/get-list",e)},checkRoleName:function(e){return Object(n["c"])("/role/check-role-name",e)},createRole:function(e){return Object(n["c"])("/role/create-role",e)},editRole:function(e){return Object(n["c"])("/role/edit-role",e)},searchRole:function(e){return Object(n["a"])("/role/search-role",e)},getRoles:function(e){return Object(n["c"])("/authorization/get-roles",e)},getPermissions:function(e){return Object(n["c"])("/authorization/get-permissions",e)},submitAuthorization:function(e){return Object(n["c"])("/authorization/submit-authorization",e)},getUserPageList:function(e){return Object(n["a"])("/user/get-user-page-list",e)},searchUser:function(e){return Object(n["a"])("/user/search-user",e)},getUserInfo:function(e){return Object(n["a"])("/user/get-user-info",e)},editUserBasicInfo:function(e){return Object(n["c"])("/user/edit-user-basic-info",e)},getUserListForSelection:function(e){return Object(n["a"])("/user/get-user-list-for-selection",e)},assignRoleToUser:function(e){return Object(n["c"])("/user/assign-role-to-user",e)}};t["a"]=s},"260f":function(e,t,i){"use strict";var n=i("a134"),s=i.n(n);s.a},"3ea4":function(e,t,i){},4437:function(e,t,i){"use strict";var n=i("702d"),s=i.n(n);s.a},"4ff4":function(e,t,i){},"702d":function(e,t,i){},"7f46":function(e,t,i){"use strict";i("0d6d");var n=i("7618"),s={isString:function(e){return"string"===typeof e},isNotString:function(e){return"string"!==typeof e},isEmpty:function(e){return!!s.isNotString(e)||0===e.trim().length},isNotEmpty:function(e){return!!s.isString(e)&&0!==e.trim().length},isBlank:function(e){var t=s.isEmpty(e);if(t)return t;var i=/^\s*$/;return i.test(e)},isNotBlank:function(e){return!s.isBlank(e)},isLengthLessThen:function(e,t){if(s.isNotString(e))throw new Error("Type of argument targetString expected string, but got "+Object(n["a"])(e));if("number"!==typeof t)throw new Error("Type of argument minLength expected number, but got "+("undefined"===typeof minLength?"undefined":Object(n["a"])(minLength)));return e.length<t},isLengthNotGreaterThen:function(e,t){if(s.isNotString(e))throw new Error("Type of argument targetString expected string, but got "+Object(n["a"])(e));if("number"!==typeof t)throw new Error("Type of argument minLength expected number, but got "+("undefined"===typeof minLength?"undefined":Object(n["a"])(minLength)));return e.length<=t},isLengthGraterThen:function(e,t){if(s.isNotString(e))throw new Error("Type of argument targetString expected string, but got "+Object(n["a"])(e));if("number"!==typeof t)throw new Error("Type of argument minLength expected number, but got "+("undefined"===typeof minLength?"undefined":Object(n["a"])(minLength)));return e.length>t},isLengthNotLessThen:function(e,t){if(s.isNotString(e))throw new Error("Type of argument targetString expected string, but got "+Object(n["a"])(e));if("number"!==typeof t)throw new Error("Type of argument minLength expected number, but got "+("undefined"===typeof minLength?"undefined":Object(n["a"])(minLength)));return e.length>=t},isLengthBetween:function(e,t,i){if(s.isNotString(e))throw new Error("Type of argument targetString expected string, but got "+Object(n["a"])(e));if("number"!==typeof t)throw new Error("Type of argument minLength expected number, but got "+Object(n["a"])(t));if("number"!==typeof i)throw new Error("Type of argument maxLength expected number, but got "+Object(n["a"])(t));return t<=e.length&&e.length<=i},isEmail:function(e){var t=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;return t.test(e)}};Object.freeze(s),t["a"]=s},"7f5a":function(e,t,i){"use strict";i.r(t);var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":e.onClickTab}},[i("el-tab-pane",{attrs:{label:"Permission Controls"}},[i("transition",{attrs:{name:"el-zoom-in-top"}},[i("permission-controls",{directives:[{name:"show",rawName:"v-show",value:e.showPermissionControls,expression:"showPermissionControls"}]})],1)],1),e._v(" "),i("el-tab-pane",{attrs:{label:"Role Controls"}},[i("transition",{attrs:{name:"el-zoom-in-top"}},[i("role-controls",{directives:[{name:"show",rawName:"v-show",value:e.showRoleControls,expression:"showRoleControls"}]})],1)],1),e._v(" "),i("el-tab-pane",{attrs:{label:"Authorization"}},[i("transition",{attrs:{name:"el-zoom-in-top"}},[i("authorization",{directives:[{name:"show",rawName:"v-show",value:e.showAuthorization,expression:"showAuthorization"}]})],1)],1)],1)],1)},s=[],r=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("heading",{attrs:{text:"API Glance"}}),e._v(" "),i("el-row",{attrs:{gutter:5}},[i("el-col",{attrs:{span:8}},[i("el-card",{staticStyle:{height:"290px"},attrs:{shadow:"never","body-style":{padding:"0"}}},[i("div",{staticClass:"clearfix",attrs:{slot:"header"},slot:"header"},[i("div",{staticStyle:{"margin-bottom":"5px"}},[e._v("Controller List")]),e._v(" "),i("el-input",{attrs:{size:"mini",placeholder:"Type class name to search",clearable:""},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),e._v(" "),i("div",{staticStyle:{height:"202px",overflow:"auto",padding:"5px"}},[i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.controllerListLoading,expression:"controllerListLoading"}],attrs:{data:e.getFilteredControllerList(),stripe:"","highlight-current-row":""},on:{"row-click":e.onClickTableRow}},[i("el-table-column",{attrs:{label:"#",width:"50px"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-radio",{attrs:{label:t.row},on:{change:e.onSelectController},model:{value:e.selectedController,callback:function(t){e.selectedController=t},expression:"selectedController"}},[i("i")])]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"className",label:"Class Name"}})],1)],1)])],1),e._v(" "),i("el-col",{attrs:{span:16}},[i("el-card",{staticStyle:{height:"290px"},attrs:{shadow:"never"}},[i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.apiSelectFormLoading,expression:"apiSelectFormLoading"}],ref:"setApiInUseForm",attrs:{model:e.setApiInUseForm,rules:e.setApiInUseFormRules,"label-width":"120px"}},[i("el-form-item",{attrs:{label:"Status"}},[i("el-radio-group",{on:{change:e.onChangeApiStatus},model:{value:e.apiStatus,callback:function(t){e.apiStatus=t},expression:"apiStatus"}},[i("el-radio",{attrs:{label:e.ApiStatus.IDLED.status,border:""}},[e._v("Idled "+e._s(e.getIdledApiCount()))]),e._v(" "),i("el-radio",{attrs:{label:e.ApiStatus.IN_USE.status,border:""}},[e._v("In use "+e._s(e.getInUseApiCount()))])],1)],1),e._v(" "),i("el-form-item",{attrs:{label:"URL",prop:"selectedApiIndex"}},[i("el-select",{staticStyle:{width:"598px"},attrs:{placeholder:"Select"},on:{change:e.onSelectUrl},model:{value:e.setApiInUseForm.selectedApiIndex,callback:function(t){e.$set(e.setApiInUseForm,"selectedApiIndex",t)},expression:"setApiInUseForm.selectedApiIndex"}},e._l(e.apiList,function(e,t){return i("el-option",{key:t,attrs:{label:e.url,value:t}})}),1)],1),e._v(" "),i("el-form-item",{attrs:{label:"Method",prop:"method"}},[i("el-input",{attrs:{readonly:""},model:{value:e.setApiInUseForm.method,callback:function(t){e.$set(e.setApiInUseForm,"method",t)},expression:"setApiInUseForm.method"}})],1),e._v(" "),i("el-form-item",{attrs:{label:"Description",prop:"description"}},[i("el-input",{attrs:{readonly:""},model:{value:e.setApiInUseForm.description,callback:function(t){e.$set(e.setApiInUseForm,"description",t)},expression:"setApiInUseForm.description"}})],1)],1)],1)],1)],1),e._v(" "),i("el-row",{staticStyle:{"margin-top":"10px","margin-bottom":"5px"}},[i("el-col",{attrs:{align:"right"}},[i("el-button",{directives:[{name:"click-control",rawName:"v-click-control"}],attrs:{type:"danger",disabled:e.enableAllButtonDisabled()},on:{click:e.onClickEnableAll}},[e._v("Enable all\n      ")]),e._v(" "),i("el-button",{directives:[{name:"click-control",rawName:"v-click-control"}],attrs:{type:"warning",disabled:e.apiStatus===e.ApiStatus.IN_USE.status},on:{click:e.onClickSetApiInUse}},[e._v("Set API in Use\n      ")])],1)],1),e._v(" "),i("heading",{attrs:{text:"API Analysis"}}),e._v(" "),i("el-row",{directives:[{name:"loading",rawName:"v-loading",value:e.apiAnalysisLoading,expression:"apiAnalysisLoading"}],staticStyle:{height:"320px"},attrs:{type:"flex",justify:"space-between"}},[i("el-col",{attrs:{span:9}},[i("pie-chart",{attrs:{"pie-chart-data":e.pieChartData}})],1),e._v(" "),i("el-col",{attrs:{span:15}},[i("div",{staticStyle:{"margin-bottom":"10px"}},[e._v("Change scope to view different report.")]),e._v(" "),i("el-form",{directives:[{name:"loading",rawName:"v-loading",value:e.apiSelectFormLoading,expression:"apiSelectFormLoading"}],attrs:{"label-width":"120px"}},[i("el-form-item",{attrs:{label:"Scope"}},[i("el-select",{attrs:{placeholder:"All",clearable:"",filterable:""},on:{change:e.onSelectScope},model:{value:e.scope,callback:function(t){e.scope=t},expression:"scope"}},e._l(e.controllerList,function(e,t){return i("el-option",{key:t,attrs:{label:e.className,value:e.packageName+"."+e.className}})}),1)],1)],1),e._v(" "),i("div",{staticStyle:{"font-size":"24px"}},[e._v("Total of Scope")]),e._v(" "),i("div",{staticStyle:{"font-size":"128px"}},[e._v(e._s(e.scopeTotal))])],1)],1),e._v(" "),i("heading",{attrs:{text:"API Details"}}),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.apiListLoading,expression:"apiListLoading"}],staticClass:"table-wrapper",staticStyle:{width:"100%"},attrs:{data:e.getFilteredApiDetailList(),height:"450","highlight-current-row":"",stripe:""}},[i("el-table-column",{attrs:{prop:"url",width:"350"},scopedSlots:e._u([{key:"header",fn:function(t){return[i("el-input",{attrs:{size:"mini",placeholder:"Type URL to search",clearable:""},model:{value:e.searchApiText,callback:function(t){e.searchApiText=t},expression:"searchApiText"}})]}}])}),e._v(" "),i("el-table-column",{attrs:{prop:"method",label:"HTTP Method",width:"120",align:"center"}}),e._v(" "),i("el-table-column",{attrs:{prop:"description",label:"Description"}}),e._v(" "),i("el-table-column",{attrs:{prop:"gmtCreated",label:"Created",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"gmtModified",label:"Modified",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{fixed:"right",label:"Operations",width:"120"}},[[i("el-button",{attrs:{type:"text",size:"small"},on:{click:e.onClickApiDetail}},[e._v("Detail")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:e.onClickEditApi}},[e._v("Edit")])]],2)],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,30,50,100],layout:"prev, next, jumper, sizes",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}})],1)},o=[],a=(i("96cf"),i("3b8d")),l=(i("6762"),i("2fdb"),i("7f7f"),i("23d2")),c=(i("456d"),i("ac6a"),i("0d6d"),i("d225")),u=function e(t,i,n){Object(c["a"])(this,e),this.status=t,this.name=i,this.description=n,Object.freeze(this)},p={IDLED:new u(0,"Idled","Idled API (not stored in db)"),IN_USE:new u(1,"In use","API in used (stored in db)"),getArray:function(){var e=[];return Object.keys(p).forEach(function(t){"function"!==typeof p[t]&&e.push(p[t])}),e}};Object.freeze(p);var d=p,h=i("a3f6"),m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:e.className,style:{height:e.height,width:e.width}})},f=[],g=i("313e"),v=i.n(g);i("817d");var b={props:{className:{type:String,default:"chart"},width:{type:String,default:"400px"},height:{type:String,default:"300px"},pieChartData:{required:!0,default:[{value:1,name:"Idled"},{value:1,name:"In use"}]}},watch:{pieChartData:{deep:!0,handler:function(e){this.setOption(e)}}},data:function(){return{chart:null}},mounted:function(){this.initChart()},beforeDestroy:function(){this.chart&&(this.chart.dispose(),this.chart=null)},methods:{initChart:function(){this.chart=v.a.init(this.$el,"macarons")},setOption:function(e){this.chart.setOption({tooltip:{trigger:"item",formatter:"{a} <br/>{b} : {c} ({d}%)"},legend:{left:"center",bottom:"10",data:["In use","Idled"]},calculable:!0,series:[{name:"API Analysis",type:"pie",radius:[15,95],center:["50%","38%"],data:e,animationEasing:"cubicInOut",animationDuration:2600}]})}}},S=b,C=i("2877"),w=Object(C["a"])(S,m,f,!1,null,null,null),y=w.exports,L={name:"ApiGlance",components:{Heading:h["a"],PieChart:y},mounted:function(){this.getController(),this.getApiAnalysis(),this.getApiList()},data:function(){return{controllerListLoading:!1,apiAnalysisLoading:!1,apiSelectFormLoading:!1,apiListLoading:!1,pieChartData:null,apiDetailList:null,searchApiText:null,scope:null,scopeTotal:null,searchText:null,controllerList:null,selectedController:null,apiList:null,ApiStatus:d,apiStatus:d.IDLED.status,idledApiCount:null,inUseApiCount:null,setApiInUseForm:{selectedApiIndex:null,method:null,description:null},setApiInUseFormRules:{selectedApiIndex:[{required:!0,trigger:"change",message:"Select a URL"}],method:[{required:!0,trigger:"change",message:"HTTP method is not provided"}],description:[{required:!0,trigger:"change",message:"Description is required"}]},currentPage:1,pageSize:10}},methods:{handleSizeChange:function(){this.getApiList()},handleCurrentChange:function(){this.getApiList()},getController:function(){var e=this;this.controllerListLoading=!0,l["a"].getController().then(function(t){e.controllerList=t.data.controllerList,e.selectedController=null}).catch(function(t){console.error(t),e.$message.error(t.message)}).finally(function(){e.controllerListLoading=!1})},getApiAnalysis:function(){var e=this;this.apiAnalysisLoading=!0;var t={classFullName:this.scope};l["a"].getApiAnalysis(t).then(function(t){e.pieChartData=[],e.pieChartData.push({name:e.ApiStatus.IDLED.name,value:t.data.idledApiCount}),e.pieChartData.push({name:e.ApiStatus.IN_USE.name,value:t.data.inUseApiCount}),e.scopeTotal=t.data.totalApiCount}).catch(function(t){console.error(t),e.$message.error(t)}).finally(function(){e.apiAnalysisLoading=!1})},getApiList:function(){var e=this;this.apiListLoading=!0;var t={currentPage:this.currentPage,pageSize:this.pageSize};l["a"].getApiList(t).then(function(t){e.apiDetailList=t.data.apiList}).catch(function(t){console.error(t),e.$message.error(t)}).finally(function(){e.apiListLoading=!1})},getFilteredControllerList:function(){var e=this;return null===this.controllerList?null:this.controllerList.filter(function(t){return!e.searchText||t.className.toLowerCase().includes(e.searchText.toLowerCase())})},getFilteredApiDetailList:function(){var e=this;return null===this.apiDetailList?null:this.apiDetailList.filter(function(t){return!e.searchApiText||t.url.toLowerCase().includes(e.searchApiText.toLowerCase())})},onClickTableRow:function(e){this.selectedController=e,this.onSelectController()},onSelectController:function(){var e=this;if(null!==this.selectedController){this.clearSelectedUrl();var t={controllerClass:this.selectedController.packageName+"."+this.selectedController.className,apiStatus:this.apiStatus};this.apiSelectFormLoading=!0,l["a"].getApiByControllerClass(t).then(function(t){e.apiList=t.data.apiList,e.idledApiCount=t.data.idledApiCount,e.inUseApiCount=t.data.inUseApiCount}).catch(function(t){console.error(t),e.$message.error(t)}).finally(function(){e.apiSelectFormLoading=!1})}},getIdledApiCount:function(){return null!==this.idledApiCount?"("+this.idledApiCount+")":null},getInUseApiCount:function(){return null!==this.inUseApiCount?"("+this.inUseApiCount+")":null},onChangeApiStatus:function(){this.clearSelectedUrl(),this.onSelectController()},onSelectUrl:function(){var e=this.apiList[this.setApiInUseForm.selectedApiIndex];this.setApiInUseForm.method=e.method,this.setApiInUseForm.description=e.description},clearSelectedUrl:function(){this.idledApiCount=this.inUseApiCount=this.setApiInUseForm.selectedApiIndex=this.setApiInUseForm.method=this.setApiInUseForm.description=null},onSelectScope:function(){this.getApiAnalysis()},enableAllButtonDisabled:function(){return this.apiStatus===this.ApiStatus.IN_USE.status||null===this.selectedController},onClickEnableAll:function(){var e=this;if(null!==this.selectedController){var t={controllerClass:this.selectedController.packageName+"."+this.selectedController.className};l["a"].setAllApiInUse(t).then(function(t){e.$message.success(t.message)}).catch(function(t){console.error(t),e.$message.error(t)}).finally(function(){e.refreshPage()})}},onClickSetApiInUse:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.$refs["setApiInUseForm"].validate();case 3:t=e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e["catch"](0),t=e.t0;case 9:if(t){e.next=11;break}return e.abrupt("return");case 11:i=this.apiList[this.setApiInUseForm.selectedApiIndex],l["a"].setApiInUse(i).then(function(e){n.$message.success(e.message),n.setApiInUseForm={selectedApiIndex:null,method:null,description:null}}).catch(function(e){n.$message.error(e)}).finally(function(){n.refreshPage()});case 13:case"end":return e.stop()}},e,this,[[0,6]])}));function t(){return e.apply(this,arguments)}return t}(),refreshPage:function(){this.getApiAnalysis(),this.onSelectController(),this.getApiList()},onClickApiDetail:function(){},onClickEditApi:function(){}}},x=L,A=Object(C["a"])(x,r,o,!1,null,"fe2436ee",null),_=A.exports,k=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"role-controls-container"},[i("heading",{attrs:{text:"Role List"}}),e._v(" "),i("el-row",{attrs:{type:"flex"}},[i("el-col",{attrs:{span:18}},[i("el-input",{attrs:{placeholder:"Enter role name to search",clearable:""},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],1),e._v(" "),i("el-col",{attrs:{span:6}},[i("el-button-group",{staticClass:"button-group"},[i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.onClickSearch}},[e._v("Search")]),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-edit-outline"},on:{click:e.onClickCreateRole}},[e._v("Create Role")])],1)],1)],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.roleListLoading,expression:"roleListLoading"}],staticClass:"table-wrapper",staticStyle:{width:"100%"},attrs:{data:e.roleList,height:"450",stripe:"","highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"name",label:"Name",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"description",label:"Description"}}),e._v(" "),i("el-table-column",{attrs:{prop:"gmtCreated",label:"Created",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{prop:"gmtModified",label:"Modified",width:"180"}}),e._v(" "),i("el-table-column",{attrs:{label:"Operations",width:"120",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.onClickEditRole(t.row)}}},[e._v("Edit")]),e._v(" "),i("el-button",{attrs:{type:"text",size:"small"},on:{click:function(i){return e.onClickDeleteRole(t.row.id)}}},[e._v("Delete")])]}}])})],1),e._v(" "),i("el-pagination",{attrs:{"current-page":e.currentPage,"page-size":e.pageSize,"page-sizes":[10,30,50,100],layout:"prev, next, jumper, sizes",background:""},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.currentPage=t},"update:current-page":function(t){e.currentPage=t},"update:pageSize":function(t){e.pageSize=t},"update:page-size":function(t){e.pageSize=t}}}),e._v(" "),i("el-dialog",{directives:[{name:"el-drag-dialog",rawName:"v-el-drag-dialog"}],attrs:{visible:e.createDialogVisible,title:"Create a Role",width:"500px","close-on-click-modal":!1},on:{"update:visible":function(t){e.createDialogVisible=t},dragDialog:e.handleDrag,close:e.onClickCancel}},[i("el-form",{ref:"roleForm",attrs:{model:e.roleForm,rules:e.createRoleFormRules,"label-width":"120px"}},[i("el-form-item",{attrs:{prop:"name",label:"Name"}},[i("el-input",{attrs:{placeholder:"Enter name",clearable:""},model:{value:e.roleForm.name,callback:function(t){e.$set(e.roleForm,"name",t)},expression:"roleForm.name"}})],1),e._v(" "),i("el-form-item",{attrs:{prop:"description",label:"Description"}},[i("el-input",{attrs:{type:"textarea",rows:3,placeholder:"Enter description"},model:{value:e.roleForm.description,callback:function(t){e.$set(e.roleForm,"description",t)},expression:"roleForm.description"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:null!==e.roleForm.id,expression:"roleForm.id!==null"}],attrs:{label:"Created"}},[i("el-input",{attrs:{readonly:""},model:{value:e.gmtCreated,callback:function(t){e.gmtCreated=t},expression:"gmtCreated"}})],1),e._v(" "),i("el-form-item",{directives:[{name:"show",rawName:"v-show",value:null!==e.roleForm.id,expression:"roleForm.id!==null"}],attrs:{label:"Modified"}},[i("el-input",{attrs:{readonly:""},model:{value:e.gmtModified,callback:function(t){e.gmtModified=t},expression:"gmtModified"}})],1)],1),e._v(" "),i("el-row",{attrs:{type:"flex",justify:"end"}},[i("el-button",{directives:[{name:"click-control",rawName:"v-click-control"}],attrs:{type:"primary",icon:"el-icon-success"},on:{click:e.onClickSave}},[e._v("Save")]),e._v(" "),i("el-button",{attrs:{icon:"el-icon-error"},on:{click:e.onClickCancel}},[e._v("Cancel")])],1)],1)],1)},I=[],P=i("c68c"),R=i("7f46"),z={name:"RoleControls",directives:{elDragDialog:P["a"]},components:{Heading:h["a"]},data:function(){var e=this,t=function(t,i,n){if(R["a"].isEmpty(i))return n(new Error("Name is required"));if(i.length>50)return n(new Error("length cannot exceed 50"));var s={id:e.roleForm.id,name:i};l["a"].checkRoleName(s).then(function(){return n()}).catch(function(e){return n(new Error(e))})};return{roleListLoading:!1,currentPage:1,pageSize:10,searchText:null,roleList:null,createDialogVisible:!1,edited:!1,roleForm:{id:null,name:null,description:null},gmtCreated:null,gmtModified:null,createRoleFormRules:{name:[{required:!0,trigger:"blur",validator:t}],description:[{required:!0,trigger:"blur",message:"Description is required"}]}}},mounted:function(){this.getRoleList()},methods:{handleSizeChange:function(){this.getRoleList()},handleCurrentChange:function(){this.getRoleList()},getRoleList:function(){var e=this;this.roleListLoading=!0;var t={currentPage:this.currentPage,pageSize:this.pageSize};l["a"].getRoleList(t).then(function(t){e.roleList=t.data.roleList}).catch(function(t){e.$message.error(t),console.error("!!!!!",t)}).finally(function(){e.roleListLoading=!1})},onClickSearch:function(){var e=this;if(R["a"].isEmpty(this.searchText))this.getRoleList();else{var t={roleName:this.searchText};l["a"].searchRole(t).then(function(t){e.roleList=[t.data]}).catch(function(t){e.$message.error(t)})}},onClickCreateRole:function(){this.createDialogVisible=!0},onClickEditRole:function(e){this.createDialogVisible=!0,this.roleForm.id=e.id,this.roleForm.name=e.name,this.roleForm.description=e.description,this.gmtCreated=e.gmtCreated,this.gmtModified=e.gmtModified},onClickDeleteRole:function(e){this.$message.info("This feature is under construction and coming soon. Delete role ".concat(e))},handleDrag:function(){this.$refs.select.blur()},onClickSave:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=!1,e.prev=1,e.next=4,this.$refs["roleForm"].validate();case 4:t=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e["catch"](1),t=e.t0;case 10:if(t){e.next=12;break}return e.abrupt("return");case 12:if(null===this.roleForm.id){e.next=15;break}return l["a"].editRole(this.roleForm).then(function(e){i.$message.success(e.message),i.$refs["roleForm"].resetFields(),i.roleForm.id=null,i.onClickCancel(),i.getRoleList()}).catch(function(e){i.$message.error(e),console.error("Error occurred when creating role",e)}),e.abrupt("return");case 15:l["a"].createRole(this.roleForm).then(function(e){i.$message.success(e.message),i.$refs["roleForm"].resetFields(),i.onClickCancel(),i.getRoleList()}).catch(function(e){i.$message.error(e),console.error("Error occurred when creating role",e)});case 16:case"end":return e.stop()}},e,this,[[1,7]])}));function t(){return e.apply(this,arguments)}return t}(),onClickCancel:function(){this.createDialogVisible=!1,null!==this.roleForm.id&&(this.roleForm={id:null,name:null,description:null})}}},T=z,O=(i("05df"),Object(C["a"])(T,k,I,!1,null,"a3c50094",null)),N=O.exports,j=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"authorization-container"},[i("el-steps",{staticClass:"steps",attrs:{active:e.activeStep,"finish-status":"success","align-center":""}},[i("el-step",{attrs:{title:"Step 1",description:"Choose Role"}}),e._v(" "),i("el-step",{attrs:{title:"Step 2",description:"Choose Permission"}}),e._v(" "),i("el-step",{attrs:{title:"Step 3",description:"Processing"}}),e._v(" "),i("el-step",{attrs:{title:"Step 4",description:"Done"}})],1),e._v(" "),i("el-card",{staticClass:"step-detail",attrs:{shadow:"never"}},[i("transition",{attrs:{mode:"out-in"}},[i(e.componentName,{ref:"step",tag:"component",attrs:{"step1-selected-roles":e.selectedRoles,"step2-selected-permission-scopes":e.selectedPermissionScopes,"step2-selected-permission-id-list":e.selectedPermissionIdList},on:{"step1-role-select":e.onRoleSelect,"step2-permission-scopes-select":e.onPermissionScopesSelect,"step2-permission-select":e.onPermissionSelect}})],1)],1),e._v(" "),i("el-row",{attrs:{type:"flex",justify:"center"}},[i("el-button-group",[i("el-button",{staticClass:"previous-next-button",attrs:{disabled:e.previousButtonDisabled(),icon:"el-icon-arrow-left"},on:{click:e.onClickPrevious}},[e._v("\n        Previous\n      ")]),e._v(" "),i("el-button",{staticClass:"previous-next-button",staticStyle:{width:"120px"},attrs:{disabled:e.nextButtonDisabled()},on:{click:e.onClickNext}},[e._v("\n        Next"),i("i",{staticClass:"el-icon-arrow-right",staticStyle:{"margin-left":"5px"}})])],1)],1)],1)},F=[],E=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"step1-container"},[i("el-row",{attrs:{type:"flex",justify:"center"}},[i("h1",{staticClass:"heading-text"},[e._v("Choose Role")])]),e._v(" "),i("el-row",{attrs:{type:"flex",justify:"center"}},[i("el-select",{directives:[{name:"lazy-select",rawName:"v-lazy-select",value:e.lazyLoad,expression:"lazyLoad"}],staticClass:"role-select",attrs:{"value-key":"id",placeholder:"Select",multiple:"","collapse-tags":"",filterable:""},model:{value:e.selectedRoles,callback:function(t){e.selectedRoles=t},expression:"selectedRoles"}},e._l(e.roleList,function(e,t){return i("el-option",{key:t,attrs:{label:e.name,value:e}})}),1)],1),e._v(" "),i("el-row",{attrs:{type:"flex",justify:"center"}},[i("el-card",{staticClass:"selected-role-container",attrs:{shadow:"hover"}},[e._l(e.selectedRoles,function(t,n){return[i("el-tooltip",{key:n,staticClass:"item",attrs:{effect:"dark",content:t.description,placement:"top-start"}},[i("el-tag",{staticClass:"selected-role-item",attrs:{type:e.getTagType(t),effect:"dark",closable:""},on:{close:function(t){return e.onCloseTag(n)},click:function(i){return e.onClickTag(t)}}},[e._v("\n            "+e._s(t.name)+"\n          ")])],1)]})],2)],1)],1)},D=[],U=i("75fc"),$=i("9da1"),q={name:"Step1",directives:{LazySelect:$["a"]},props:{step1SelectedRoles:{type:Array,require:!0}},watch:{selectedRoles:{deep:!0,handler:function(e){this.$emit("step1-role-select",e)}},step1SelectedRoles:{deep:!0,handler:function(e){this.selectedRoles=e}}},data:function(){return{roleList:[],selectedRoles:[],tagTypes:["","success","info","warning","danger"],currentPage:1,pageSize:10,limitReached:!1}},methods:{getRoleList:function(){var e=this,t={currentPage:this.currentPage,pageSize:this.pageSize};l["a"].getRoles(t).then(function(t){e.roleList=[].concat(Object(U["a"])(e.roleList),Object(U["a"])(t.data.roleList))}).catch(function(t){e.$message.error(t),console.error("Error occurred.",t)})},lazyLoad:function(){var e=this;if(!this.limitReached){var t={currentPage:++this.currentPage,pageSize:this.pageSize};l["a"].getRoles(t).then(function(t){t.data.roleList.length>0?e.roleList=[].concat(Object(U["a"])(e.roleList),Object(U["a"])(t.data.roleList)):e.limitReached=!0}).catch(function(t){e.$message.error(t),console.error("Error occurred.",t)})}},getTagType:function(e){return this.tagTypes[e.id%5]},onClickTag:function(e){console.error("need to add click event to open a dialog showing the permissions which has been authorized to the role",e)},onCloseTag:function(e){this.selectedRoles.splice(e,1)}},mounted:function(){this.selectedRoles=this.step1SelectedRoles,this.getRoleList()}},M=q,B=(i("aa94"),Object(C["a"])(M,E,D,!1,null,"b704b1f2",null)),H=B.exports,V=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"step2-container"},[i("el-form",{attrs:{inline:!0}},[i("el-form-item",{attrs:{label:"Permission Scope"}},[i("el-select",{staticClass:"permission-scope-select",attrs:{placeholder:"Select",multiple:"","collapse-tags":"",filterable:"",clearable:""},model:{value:e.selectedPermissionScopes,callback:function(t){e.selectedPermissionScopes=t},expression:"selectedPermissionScopes"}},e._l(e.permissionScopeList,function(e,t){return i("el-option",{key:t,attrs:{label:e.className,value:e.packageName+"."+e.className}})}),1)],1),e._v(" "),i("el-form-item",[i("el-button",{directives:[{name:"click-control",rawName:"v-click-control"}],attrs:{type:"primary"},on:{click:e.onClickLoad}},[e._v("Load")])],1)],1),e._v(" "),i("el-row",{staticClass:"permission-detail-container"},[e._l(e.permissionDetailList,function(t,n){return[i("el-col",{key:n,staticClass:"permission-detail-item"},[i("el-card",{attrs:{shadow:"never"}},[i("div",{attrs:{slot:"header"},slot:"header"},[i("el-row",[i("el-col",{staticClass:"permission-title",attrs:{span:12}},[e._v("\n                "+e._s(t.controllerName)+"\n              ")]),e._v(" "),i("el-col",{attrs:{span:12,align:"right"}},[i("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.onClickInvoke(n)}}},[e._v("Invoke")]),e._v(" "),i("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.onClickRevoke(n)}}},[e._v("Revoke")])],1)],1)],1),e._v(" "),i("el-checkbox-group",{model:{value:e.selectedPermissionIdList,callback:function(t){e.selectedPermissionIdList=t},expression:"selectedPermissionIdList"}},[i("el-table",{ref:"apiList",refInFor:!0,staticClass:"table-wrapper",staticStyle:{width:"100%"},attrs:{data:t.apiList,height:"100%",stripe:"","highlight-current-row":""}},[i("el-table-column",{attrs:{prop:"url",label:"URL"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("el-checkbox",{attrs:{label:t.row.permissionId}},[e._v(e._s(t.row.url))])]}}],null,!0)}),e._v(" "),i("el-table-column",{attrs:{prop:"description",label:"Description"}})],1)],1)],1)],1)]})],2)],1)},G=[],W=(i("7514"),function e(t,i){Object(c["a"])(this,e),this.type=t,this.description=i,Object.freeze(this)}),J={CONTROLLER:new W(0,"Controller"),PAGE:new W(1,"Page"),BUTTON:new W(2,"Button (API)"),getArray:function(){var e=[];return Object.keys(J).forEach(function(t){"function"!==typeof J[t]&&e.push(J[t])}),e}};Object.freeze(J);var X=J,Y={name:"Step2",props:{step2SelectedPermissionScopes:{type:Array,require:!0},step2SelectedPermissionIdList:{type:Array,require:!0}},watch:{selectedPermissionScopes:{deep:!0,handler:function(e){this.$emit("step2-permission-scopes-select",e)}},step2SelectedPermissionScopes:{deep:!0,handler:function(e){this.selectedPermissionScopes=e,0===this.selectedPermissionScopes.length&&this.onClearPermissionScopes(),this.onClickLoad()}},selectedPermissionIdList:{deep:!0,handler:function(e){this.$emit("step2-permission-select",e)}},step2SelectedPermissionIdList:{deep:!0,handler:function(e){this.selectedPermissionIdList=e}}},data:function(){return{selectedPermissionScopes:[],selectedPermissionIdList:[],permissionScopeList:[],permissionDetailList:[],permissionType:X.BUTTON.type}},methods:{getPermissionScope:function(){var e=this;l["a"].getController().then(function(t){e.permissionScopeList=t.data.controllerList}).catch(function(t){e.$message.error(t.message),console.error(t)})},onClearPermissionScopes:function(){this.selectedPermissionIdList=[],this.permissionDetailList=[]},onClickLoad:function(){var e=this;if(0!==this.selectedPermissionScopes.length){var t={controllerFullClassName:this.selectedPermissionScopes,permissionType:this.permissionType};l["a"].getPermissions(t).then(function(t){e.permissionDetailList=t.data.controllerList})}},onClickInvoke:function(e){var t=this;this.permissionDetailList[e].apiList.forEach(function(e){var i=t.selectedPermissionIdList.find(function(t){return t===e.permissionId});i||t.selectedPermissionIdList.push(e.permissionId)})},onClickRevoke:function(e){var t=this;this.permissionDetailList[e].apiList.forEach(function(e){var i=t.selectedPermissionIdList.find(function(t){return t===e.permissionId});if(i){var n=t.selectedPermissionIdList.indexOf(i);t.selectedPermissionIdList.splice(n,1)}})}},mounted:function(){this.selectedPermissionScopes=this.step2SelectedPermissionScopes,this.selectedPermissionIdList=this.step2SelectedPermissionIdList,this.getPermissionScope(),this.onClickLoad()}},Z=Y,K=(i("260f"),Object(C["a"])(Z,V,G,!1,null,"4e9c3ce5",null)),Q=K.exports,ee=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"step3-container"},[i("el-row",{attrs:{type:"flex",justify:"center"}},[i("el-progress",{attrs:{type:"circle",percentage:e.percentage,status:"text"}},[e._v(e._s(e.percentage)+"%")])],1),e._v(" "),i("el-row",{attrs:{type:"flex",justify:"center"}},[i("p",{staticClass:"status-message"},[e._v(e._s(e.messages[e.index]))])]),e._v(" "),i("transition",{attrs:{name:"el-zoom-in-center"}},[i("el-row",{directives:[{name:"show",rawName:"v-show",value:e.showOperationResult,expression:"showOperationResult"}],attrs:{type:"flex",justify:"center"}},[i("p",{staticClass:"operation-result"},[e._v(e._s(e.operationResult))])])],1)],1)},te=[],ie={name:"Step3",props:{step1SelectedRoles:{type:Array,require:!0},step2SelectedPermissionIdList:{type:Array,require:!0}},data:function(){return{percentage:0,messages:["Hold on a second, we're preparing necessary data","Sending request to backend server","Processing...","Operation result"],index:0,showOperationResult:!1,operationResult:null}},methods:{startProcessing:function(){var e=Object(a["a"])(regeneratorRuntime.mark(function e(){var t,i,n=this;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return this.percentage+=Math.ceil(40*Math.random()),t=this.step1SelectedRoles.map(function(e){return e.id}),e.next=4,this.delay(20);case 4:return i={roleIdList:t,permissionIdList:this.step2SelectedPermissionIdList},e.next=7,this.delay(20);case 7:l["a"].submitAuthorization(i).then(function(e){n.index=3,n.percentage=100,n.operationResult=e.message,n.showOperationResult=!0}).catch(function(e){n.index=3,n.percentage=4,n.operationResult=e,n.showOperationResult=!0,n.$message.error(e),console.error("Error occurred when submitting authorization.",e)});case 8:case"end":return e.stop()}},e,this)}));function t(){return e.apply(this,arguments)}return t}(),delay:function(e){var t=this;return new Promise(function(i){setTimeout(function(){t.index++,t.percentage+=Math.ceil(Math.random()*e),i()},1500)})}}},ne=ie,se=(i("2246"),Object(C["a"])(ne,ee,te,!1,null,"728b6c8c",null)),re=se.exports,oe=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"step4-container"},[i("el-row",{attrs:{type:"flex",justify:"center"}},[i("h1",[e._v("Congratulations! Authorization done!")])])],1)},ae=[],le={name:"Step4"},ce=le,ue=(i("a4bf"),Object(C["a"])(ce,oe,ae,!1,null,"a3660614",null)),pe=ue.exports,de={name:"Authorization",components:{Step1:H,Step2:Q,Step3:re,Step4:pe},data:function(){return{activeStep:0,componentName:"Step1",selectedRoles:[],selectedPermissionScopes:[],selectedPermissionIdList:[]}},methods:{onClickPrevious:function(){this.activeStep--<=0&&(this.activeStep=0),this.showStep()},previousButtonDisabled:function(){return 0===this.activeStep},onClickNext:function(){this.activeStep++>=3&&(this.activeStep=3),this.showStep()},nextButtonDisabled:function(){return 3===this.activeStep},showStep:function(){var e=this;switch(this.activeStep){case 0:return void(this.componentName="Step1");case 1:return 0===this.selectedRoles.length?(this.activeStep--,void this.$message.warning("To choose role is undone")):void(this.componentName="Step2");case 2:return 0===this.selectedPermissionIdList.length?(this.activeStep--,void this.$message.warning("To choose permission is undone")):(this.componentName="Step3",void setTimeout(function(){e.$refs.step.startProcessing()},2e3));case 3:return void(this.componentName="Step4")}},onRoleSelect:function(e){this.selectedRoles=e},onPermissionScopesSelect:function(e){this.selectedPermissionScopes=e},onPermissionSelect:function(e){this.selectedPermissionIdList=e}}},he=de,me=(i("dc45"),Object(C["a"])(he,j,F,!1,null,"239de76d",null)),fe=me.exports,ge={name:"SecurityAndPermission",components:{PermissionControls:_,RoleControls:N,Authorization:fe},data:function(){return{showPermissionControls:!0,showRoleControls:!1,showAuthorization:!1}},methods:{onClickTab:function(e){switch(e.index){case"0":this.showPermissionControls=!0,this.showRoleControls=this.showAuthorization=!1;break;case"1":this.showRoleControls=!0,this.showPermissionControls=this.showAuthorization=!1;break;case"2":this.showAuthorization=!0,this.showRoleControls=this.showPermissionControls=!1;break}}}},ve=ge,be=(i("4437"),Object(C["a"])(ve,n,s,!1,null,"51afe887",null));t["default"]=be.exports},"84ff":function(e,t,i){},"8d9c":function(e,t,i){},"9da1":function(e,t,i){"use strict";var n={inserted:function(e,t,i){var n=e.querySelector(".el-select-dropdown .el-select-dropdown__wrap");n.addEventListener("scroll",function(){var e=this.scrollHeight-this.scrollTop<=this.clientHeight;e&&t.value()})}},s=function(e){e.directive("lazy-select",n)};window.Vue&&(window["lazy-select"]=n,Vue.use(s)),n.install=s;t["a"]=n},"9f22":function(e,t,i){"use strict";var n=i("3ea4"),s=i.n(n);s.a},a134:function(e,t,i){},a16a:function(e,t,i){},a3f6:function(e,t,i){"use strict";var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("el-row",{staticClass:"heading-container"},[i("h1",{class:"heading-container-level"+e.level},[e._v(e._s(e.text))])])},s=[],r=(i("c5f6"),{props:{text:{type:String,default:"Heading",required:!0},level:{type:Number,default:1,required:!1}},name:"Heading",data:function(){return{}}}),o=r,a=(i("9f22"),i("2877")),l=Object(a["a"])(o,n,s,!1,null,"034a1d74",null);t["a"]=l.exports},a4bf:function(e,t,i){"use strict";var n=i("4ff4"),s=i.n(n);s.a},aa94:function(e,t,i){"use strict";var n=i("b966"),s=i.n(n);s.a},b966:function(e,t,i){},c68c:function(e,t,i){"use strict";i("a481"),i("6762"),i("2fdb");var n={bind:function(e,t,i){var n=e.querySelector(".el-dialog__header"),s=e.querySelector(".el-dialog");n.style.cssText+=";cursor:move;",s.style.cssText+=";top:0px;";var r=function(){return window.document.currentStyle?function(e,t){return e.currentStyle[t]}:function(e,t){return getComputedStyle(e,!1)[t]}}();n.onmousedown=function(e){var t=e.clientX-n.offsetLeft,o=e.clientY-n.offsetTop,a=s.offsetWidth,l=s.offsetHeight,c=document.body.clientWidth,u=document.body.clientHeight,p=s.offsetLeft,d=c-s.offsetLeft-a,h=s.offsetTop,m=u-s.offsetTop-l,f=r(s,"left"),g=r(s,"top");f.includes("%")?(f=+document.body.clientWidth*(+f.replace(/\%/g,"")/100),g=+document.body.clientHeight*(+g.replace(/\%/g,"")/100)):(f=+f.replace(/\px/g,""),g=+g.replace(/\px/g,"")),document.onmousemove=function(e){var n=e.clientX-t,r=e.clientY-o;-n>p?n=-p:n>d&&(n=d),-r>h?r=-h:r>m&&(r=m),s.style.cssText+=";left:".concat(n+f,"px;top:").concat(r+g,"px;"),i.child.$emit("dragDialog")},document.onmouseup=function(e){document.onmousemove=null,document.onmouseup=null}}}},s=function(e){e.directive("el-drag-dialog",n)};window.Vue&&(window["el-drag-dialog"]=n,Vue.use(s)),n.install=s;t["a"]=n},dc45:function(e,t,i){"use strict";var n=i("84ff"),s=i.n(n);s.a}}]);